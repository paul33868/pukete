<ion-header>
  <ion-navbar>
    <button ion-button
            menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{dictionary?.index?.title}}</ion-title>
    <ion-buttons right>
      <button ion-button
              icon-only
              (click)="addEvent()"
              [disabled]="event?.persons?.length < 1">
        <ion-icon name="add-circle"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-list *ngIf="event?.persons?.length > 0">
    <ion-item class="event-input">
      <ion-input type="text"
                 placeholder="{{dictionary?.index?.inputs?.event}}"
                 [(ngModel)]="event.name"
                 (blur)="finishEditingName()"></ion-input>
    </ion-item>

    <ion-item *ngFor="let person of event?.persons"
              class="person-item">
      <p (click)="editPersonExpenses(person)">{{person.name}} - <strong>${{person.drinkAmount + person.foodAmount + person.othersAmount | number:'1.2-2'}}</strong></p>
      <div>
        <ion-badge item-end
                   color="light"
                   *ngIf="!person.inDrink && !person.inFood && !person.inOthers"
                   (click)="editPersonExpenses(person)">{{dictionary?.index?.labels?.nothing}}</ion-badge>
        <ion-badge item-end
                   *ngIf="person.inDrink && person.inFood && person.inOthers"
                   (click)="editPersonExpenses(person)">{{dictionary?.index?.labels?.all}}</ion-badge>
        <ion-badge item-end
                   color="danger"
                   *ngIf="person.inDrink && (!person.inFood || !person.inOthers)"
                   (click)="editPersonExpenses(person)">{{dictionary?.index?.labels?.drinks}}</ion-badge>
        <ion-badge item-end
                   color="secondary"
                   *ngIf="person.inFood && (!person.inDrink || !person.inOthers)"
                   (click)="editPersonExpenses(person)">{{dictionary?.index?.labels?.food}}</ion-badge>
        <ion-badge item-end
                   color="dark"
                   *ngIf="person.inOthers && (!person.inDrink || !person.inFood)"
                   (click)="editPersonExpenses(person)">{{dictionary?.index?.labels?.others}}</ion-badge>
      </div>
      <button ion-button
              color="secondary"
              item-end
              (click)="editPerson(person)">
                <ion-icon name="create"></ion-icon>
      </button>
      <button ion-button
              color="danger"
              (click)="removePerson(person)"
              item-end>
              <ion-icon name="trash"></ion-icon>
      </button>
    </ion-item>
  </ion-list>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-buttons left>
      <button ion-button
              icon-only
              (click)="addPerson()">
        <ion-icon name="person-add"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons right>
      <button ion-button
              icon-only
              (click)="calculate()"
              [disabled]="event?.persons?.length < 2">
        <ion-icon name="calculator"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>