<ion-header>
  <ion-navbar>
    <button ion-button
            menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-input type="text"
               placeholder="{{dictionary?.index?.inputs?.event}}"
               [(ngModel)]="event.name"
               (blur)="finishEditingName()"></ion-input>
    <ion-buttons right>
      <button ion-button
              icon-only
              (click)="addEvent()"
              [disabled]="event?.persons?.length < 1">
        <ion-icon name="add-circle"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-card *ngFor="let person of event?.persons">
    <ion-card-header *ngIf="person.name">
      {{person.name}} <strong>{{dictionary?.index?.alreadyPaid}}: ${{(person.drinkAmount - -person.foodAmount - -person.othersAmount) |
      number:'1.2-2'}}</strong>
    </ion-card-header>
    <ion-card-content>
      <ion-item class="persons-input">
        <ion-input type="text"
                   placeholder="{{dictionary?.index?.inputs?.person}}"
                   [(ngModel)]="person.name">
        </ion-input>
        <button ion-button
                icon-only
                item-end
                clear
                color="danger"
                (click)="removePerson(person)">
        <ion-icon name="trash"></ion-icon>
      </button>
      </ion-item>

      <div class="checkbox-container">
        <p class="expenses-descriptions-first">Already paid in: </p>
        <div class="expenses-container">
          <ion-input type="text"
                     [(ngModel)]="person.drinkAmount">
          </ion-input>
          <span class="expenses-input-description">Drinks</span>
        </div>
        <div class="expenses-container">
          <ion-input type="text"
                     [(ngModel)]="person.foodAmount">
          </ion-input>
          <span class="expenses-input-description">Food</span>
        </div>
        <div class="expenses-container">
          <ion-input type="text"
                     [(ngModel)]="person.othersAmount">
          </ion-input>
          <span class="expenses-input-description">Others</span>
        </div>
      </div>

      <div class="checkbox-container">
        <p class="expenses-descriptions-second">Is counted on: </p>
        <ion-item class="checkbox-counted">
          <ion-label>{{dictionary?.index?.labels?.drinks}}</ion-label>
          <ion-checkbox [(ngModel)]="person.inDrink"></ion-checkbox>
        </ion-item>
        <ion-item class="checkbox-counted">
          <ion-label>{{dictionary?.index?.labels?.food}}</ion-label>
          <ion-checkbox [(ngModel)]="person.inFood"></ion-checkbox>
        </ion-item>
        <ion-item class="checkbox-counted">
          <ion-label>{{dictionary?.index?.labels?.others}}</ion-label>
          <ion-checkbox [(ngModel)]="person.inOthers"></ion-checkbox>
        </ion-item>
      </div>
    </ion-card-content>
  </ion-card>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-buttons left>
      <button ion-button
              icon-only
              (click)="addPerson()">
        <ion-icon name="person-add"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons right>
      <button ion-button
              icon-only
              (click)="calculate()"
              [disabled]="event?.persons?.length < 2">
        <ion-icon name="calculator"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>